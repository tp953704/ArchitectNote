Rust åŸºç¤çŸ¥è­˜

è®Šæ•¸å’Œè®Šç•°æ€§
ç†è§£å¯è®Šæ€§çš„æ¦‚å¿µå°æ–¼é«˜æ•ˆç·¨ç¨‹è‡³é—œé‡è¦ã€‚åœ¨è¨ˆç®—æ©Ÿç§‘å­¸ä¸­ï¼Œå¯è®Šæ€§å®šç¾©è®Šæ•¸çš„å€¼åœ¨åˆå§‹åŒ–å¾Œæ˜¯å¦å¯ä»¥æ›´æ”¹ã€‚å¯è®Šè®Šæ•¸å…è¨±ä¿®æ”¹ï¼Œè€Œä¸å¯è®Šè®Šæ•¸ä¸€æ—¦è¨­å®šå°±ä¸å…è¨±ä»»ä½•æ›´æ”¹ã€‚

Rust åœ¨è¨­è¨ˆæ™‚å……åˆ†è€ƒæ…®äº†å®‰å…¨æ€§å’Œä¸¦ç™¼æ€§ï¼Œå› æ­¤ Rust ä¸­çš„è®Šæ•¸é è¨­æ˜¯ä¸å¯è®Šçš„ã€‚é€™ç¨®è¨­è¨ˆç­–ç•¥å¯ä»¥é˜²æ­¢è³‡æ–™çš„æ„å¤–æ›´æ”¹ï¼Œå¾è€Œæé«˜ç¨‹å¼ç¢¼çš„å¯é æ€§ã€‚

è€ƒæ…®ä»¥ä¸‹ Rust ç¯„ä¾‹ï¼Œæ¼”ç¤ºäº†ä¸å¯è®Šè®Šæ•¸çš„ä½¿ç”¨ï¼š

## Rustï¼šèªæ³•æ•´ç†ï¼ˆä¸­æ–‡ Markdownï¼‰

ä»¥ä¸‹ç‚ºæ•´ç†å¾Œçš„ç­†è¨˜ï¼Œå…§å®¹ä»¥ä¸­æ–‡ Markdown å‘ˆç¾ï¼Œä¸¦ä¿ç•™å¯è¤‡è£½çš„ Rust ç¯„ä¾‹ç¨‹å¼ç¢¼ã€‚

---

## ç›®éŒ„ï¼ˆå»ºè­°ï¼‰
- è®Šæ•¸èˆ‡å¯è®Šæ€§
- æ¨™é‡èˆ‡è¤‡åˆè³‡æ–™é¡å‹
- å¸¸æ•¸ï¼ˆconstï¼‰
- è®Šæ•¸é™°å½±ï¼ˆshadowingï¼‰
- å·¨é›†ï¼ˆmacroï¼‰
- æ§åˆ¶æµç¨‹ï¼šif / else / if
- è¿´åœˆèˆ‡æ¨™ç±¤ï¼ˆloop / while / for / break / continueï¼‰
- match èˆ‡æ¨¡å¼åŒ¹é…

---

## è®Šæ•¸èˆ‡å¯è®Šæ€§

Rust é è¨­è®Šæ•¸ç‚ºä¸å¯è®Šï¼ˆimmutableï¼‰ï¼Œé€™èƒ½æå‡ç¨‹å¼çš„å®‰å…¨æ€§èˆ‡å¯é æ¸¬æ€§ã€‚åœ¨éœ€è¦æ›´æ”¹è®Šæ•¸æ™‚ï¼Œå¯ä½¿ç”¨ `mut` è²æ˜å¯è®Šè®Šæ•¸ã€‚

ç¯„ä¾‹ï¼ˆä¸å¯è®Šï¼Œæœƒç·¨è­¯éŒ¯èª¤ï¼‰ï¼š

```rust
fn main() {
    let y = 10;
    println!("The value of y is: {}", y);
    // y = 20; // ç·¨è­¯éŒ¯èª¤ï¼šä¸èƒ½å†æ¬¡è³¦å€¼çµ¦ä¸å¯è®Šè®Šæ•¸
}
```

ç¯„ä¾‹ï¼ˆå¯è®Šï¼‰ï¼š

```rust
fn main() {
    let mut y = 10;
    println!("The value of y is: {}", y);
    y = 20;
    println!("The value of y is: {}", y);
}
```

é‡é»ï¼šé è¨­ä¸å¯è®Šæ€§å°æ–¼ä¸¦ç™¼ç¨‹å¼è¨­è¨ˆå°¤å…¶æœ‰å¹«åŠ©ï¼›è‹¥éœ€è¦æ”¹è®Šå€¼ï¼Œé¡¯å¼ä½¿ç”¨ `mut`ã€‚

---

## æ¨™é‡èˆ‡è¤‡åˆè³‡æ–™é¡å‹

Rust ç‚ºéœæ…‹é¡å‹èªè¨€ï¼Œå…§å»ºè³‡æ–™é¡å‹å¯åˆ†ç‚ºæ¨™é‡ï¼ˆscalarï¼‰èˆ‡è¤‡åˆï¼ˆcompoundï¼‰å…©é¡ã€‚

### æ¨™é‡é¡å‹
- æ•´æ•¸ï¼ˆintegerï¼‰ï¼šä¾‹å¦‚ `i32`ã€`u64`ã€`usize` ç­‰ã€‚Rust é è¨­ç‚º `i32`ã€‚
- æµ®é»æ•¸ï¼ˆfloating-pointï¼‰ï¼š`f32`ã€`f64`ï¼ˆé è¨­ç‚º `f64`ï¼‰ã€‚
- å¸ƒæ—ï¼ˆboolï¼‰ï¼š`true` / `false`ã€‚
- å­—å…ƒï¼ˆcharï¼‰ï¼šUnicode æ¨™é‡å€¼ï¼Œä½” 4 bytesã€‚

æ•´æ•¸å­—é¢é‡ç¯„ä¾‹ï¼š

```rust
fn main() {
    let decimal = 98_222;
    let hex = 0xff;
    let octal = 0o77;
    let binary = 0b1111_0000;
    let byte = b'A'; // u8

    println!("Decimal: {:?}", decimal);
    println!("Hex: {:?}", hex);
}
```

æµ®é»æ•¸èˆ‡å¸ƒæ—ã€å­—å…ƒç¯„ä¾‹ï¼š

```rust
fn main() {
    let x = 2.0;      // f64
    let y: f32 = 3.0; // f32
    let t: bool = true;
    let c: char = 'ğŸ˜»';
}
```

### è¤‡åˆé¡å‹
- å…ƒçµ„ï¼ˆtupleï¼‰ï¼šå¯åŒ…å«ä¸åŒå‹åˆ¥ï¼Œé•·åº¦å›ºå®šã€‚
- é™£åˆ—ï¼ˆarrayï¼‰ï¼šåŒä¸€å‹åˆ¥ã€é•·åº¦å›ºå®šã€‚

å…ƒçµ„ç¯„ä¾‹ï¼š

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
    let (x, y, z) = tup; // è§£æ§‹
    println!("y = {}", y);
    println!("tup.0 = {}", tup.0);
}
```

é™£åˆ—èˆ‡è¶Šç•Œè™•ç†ï¼š

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];
    let first = a[0];
    println!("first = {}", first);

    // å®‰å…¨å­˜å–ï¼šä½¿ç”¨ get å›å‚³ Option
    match a.get(6) {
        Some(v) => println!("v = {}", v),
        None => println!("index out of bounds"),
    }
}
```

æ³¨æ„ï¼šç›´æ¥ä»¥ç´¢å¼•å­˜å–è¶Šç•Œæœƒåœ¨åŸ·è¡Œæ™‚ panicï¼ˆææ…Œï¼‰ã€‚

---

## å¸¸æ•¸ï¼ˆconstï¼‰

å¸¸æ•¸ä½¿ç”¨ `const` è²æ˜ï¼Œå¿…é ˆæœ‰å‹åˆ¥è¨»è¨˜ï¼Œä¸”å…¶å€¼åœ¨ç·¨è­¯æ™‚æ±ºå®šï¼ˆcompile-timeï¼‰ã€‚å¸¸æ•¸å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸå®£å‘Šï¼ˆåŒ…å«å…¨åŸŸï¼‰ã€‚å‘½åæ…£ä¾‹ç‚ºå…¨å¤§å¯«ï¼‹åº•ç·šã€‚

```rust
const MAX_USERS: u32 = 1000;

const SECONDS_IN_A_MINUTE: u32 = 60;
const MINUTES_IN_AN_HOUR: u32 = 60;
const HOURS_IN_A_DAY: u32 = 24;
const SECONDS_IN_A_DAY: u32 = SECONDS_IN_A_MINUTE * MINUTES_IN_AN_HOUR * HOURS_IN_A_DAY;
```

å„ªé»ï¼šå¯è®€æ€§ã€é›†ä¸­ç®¡ç†ã€æ¶ˆé™¤é­”æ³•æ•¸å­—ã€‚

---

## è®Šæ•¸é™°å½±ï¼ˆShadowingï¼‰

é™°å½±å…è¨±ä½¿ç”¨ç›¸åŒè®Šæ•¸åé‡æ–°ç¶å®šä¸€å€‹æ–°å€¼ï¼ˆç”šè‡³ä¸åŒé¡å‹ï¼‰ï¼Œæ–°ç¶å®šæœƒé®è”½å…ˆå‰çš„ç¶å®šï¼Œåœ¨ç•¶å‰ä½œç”¨åŸŸæœ‰æ•ˆã€‚

```rust
fn main() {
    let a = 5;
    let a = a + 1; // a ç¾åœ¨æ˜¯ 6
    {
        let a = a * 2; // å…§éƒ¨ä½œç”¨åŸŸçš„ a ç‚º 12
        println!("inner a = {}", a);
    }
    println!("outer a = {}", a); // ä»ç‚º 6

    // è½‰æ›å‹åˆ¥ç¯„ä¾‹
    let spaces = "   ";
    let spaces = spaces.len(); // now usize
    println!("spaces length = {}", spaces);
}
```

æ³¨æ„ï¼šé™°å½±ä¸åŒæ–¼ `mut`ï¼ˆmutableï¼‰ï¼›é™°å½±å¯ä»¥æ”¹è®Šå‹åˆ¥ï¼Œè€Œ `mut` ä¸èƒ½ã€‚

---

## å·¨é›†ï¼ˆmacroï¼‰

Rust çš„å·¨é›†èƒ½åœ¨ç·¨è­¯æœŸå±•é–‹ç¨‹å¼ç¢¼ï¼ˆmetaprogrammingï¼‰ã€‚å¸¸è¦‹çš„è²æ˜å¼å·¨é›†ä½¿ç”¨ `macro_rules!`ã€‚

ç°¡å–®å·¨é›†ç¯„ä¾‹ï¼š

```rust
macro_rules! greet {
    () => {
        println!("Hello, Rustaceans!");
    };
}

fn main() {
    greet!();
}
```

å¸¶åƒæ•¸çš„å·¨é›†ï¼š

```rust
macro_rules! greet {
    ($name:expr) => {
        println!("Hello, {}!", $name);
    };
}

fn main() {
    greet!("Alice");
}
```

å·¨é›†ç”¨ä¾‹ï¼šæ—¥èªŒã€ç”¢ç”Ÿæ¨£æ¿ã€DSL ç­‰ã€‚æ¨™æº–å®å¦‚ `println!` ä¹Ÿæ˜¯å·¨é›†çš„ä¸€ç¨®ã€‚

---

## æ§åˆ¶æµç¨‹ï¼ˆif / else / else ifï¼‰

åŸºæœ¬èªæ³•ï¼š

```rust
if condition {
    // ...
} else if other_condition {
    // ...
} else {
    // ...
}
```

ç¯„ä¾‹ï¼š

```rust
fn main() {
    let number = 20;
    if number < 10 {
        println!("<10");
    } else if number < 20 {
        println!("10..=19");
    } else {
        println!(">=20");
    }
}
```

å¯åœ¨ `let` å®£å‘Šä¸­ä½¿ç”¨ `if` è¡¨é”å¼ç‚ºè®Šæ•¸è³¦å€¼ï¼š

```rust
let condition = true;
let number = if condition { 5 } else { 10 };
```

---

## è¿´åœˆèˆ‡æ¨™ç±¤ï¼ˆloop / while / for / break / continueï¼‰

### loopï¼ˆç„¡é™è¿´åœˆï¼‰

```rust
fn main() {
    let mut count = 0;
    loop {
        count += 1;
        if count == 5 { break; }
    }
}
```

`loop` å¯å›å‚³å€¼ï¼š

```rust
let result = loop {
    break 42;
};
```

### æ¨™ç±¤ï¼ˆlabelï¼‰ç”¨æ–¼å·¢ç‹€è¿´åœˆæ§åˆ¶

```rust
fn main() {
    let mut outer = 0;
    'outer: loop {
        outer += 1;
        loop {
            break 'outer; // è·³å‡ºæ¨™è¨˜ç‚º 'outer çš„è¿´åœˆ
        }
    }
}
```

### for èˆ‡ while

```rust
for i in 1..6 { println!("{}", i); }

let mut n = 3;
while n != 0 {
    println!("{}!", n);
    n -= 1;
}
```

ä½¿ç”¨ `break` ææ—©çµ‚æ­¢ï¼Œ`continue` è·³éæœ¬æ¬¡è¿­ä»£ã€‚

---

## matchï¼ˆæ¨¡å¼åŒ¹é…ï¼‰

`match` æ˜¯ Rust å¼·å¤§çš„æ§åˆ¶æµç¨‹çµæ§‹ï¼Œå¯åŒ¹é…æ–‡å­—ã€è®Šæ•¸ã€ç¯„åœã€å…ƒçµ„ã€åˆ—èˆ‰ç­‰ã€‚

ç°¡å–®ç¯„ä¾‹ï¼š

```rust
fn main() {
    let number = 3;
    match number {
        1 => println!("One"),
        2 => println!("Two"),
        3 => println!("Three"),
        _ => println!("Other"),
    }
}
```

å¤šé‡æ¨¡å¼èˆ‡ç¯„åœï¼š

```rust
match x {
    1 | 2 | 3 => println!("1..=3"),
    4..=10 => println!("4..=10"),
    _ => println!("other"),
}
```

è§£æ§‹å…ƒçµ„ä¸¦ä½¿ç”¨ guardï¼š

```rust
let pair = (2, -2);
match pair {
    (x, y) if x == y => println!("equal"),
    (x, y) if x + y == 0 => println!("opposites"),
    _ => println!("none"),
}
```

`match` ä¿è­‰åˆ†æ”¯è¢«è¦†è“‹ï¼ˆexhaustivenessï¼‰ï¼Œå› æ­¤èƒ½é¿å…éºæ¼æƒ…æ³ã€‚

---
